# DLeague-Datas
这里记录了DLeague的详细牌谱，以供分析讨论。开源项目，用爱发电，麻烦诸位顺手**star**了~

## 用法
这里将介绍各种场景下的应用，这里不赘述git和conda的配置，不过请确认您当前使用的环境安装了一下python包：
```
requests
pyperclip
colorama
webbrowser
```

以上列举的库都可以轻松地使用 
```
pip install <name>  或者   conda install <name>
```

来完成安装。

接下来就是各个场景下的使用说明，请据您所需阅读。

我们统一使用这样的称呼：

- [**scop 表**] score & operation 表，也是gy仓库统计使用的json表项。
- [**tex 牌谱**] 使用.tex后缀的手工录入牌谱，可读性好。
- [**json 个人牌谱**] 使用.json后缀的个人牌谱，由tex牌谱通过`convert.py`转换得到。
- [**json 总牌谱**] 使用.json后缀的总牌谱，由四个json个人牌谱通过`merge.py`转换得到。
- [**short 牌谱**] 使用.short后缀的牌谱，用于记录最小化信息，可以生成模板和scop表。

### 使用 .short 文件快速生成 scop 表和 tex 牌谱模板
.short 文件是一种包含支持生成 scop 表最小信息的文件，并且和 tex 牌谱语法类似，学习成本较低。同时，这种文件还可以指导生成 tex 牌谱。

#### short 语法
首先介绍一下 short 语法，需要注意的是，.short 文件大小写不敏感，自动忽略空格但**不允许注释**！.short 文件的开头是参与游戏的玩家，中间用半角逗号分开，按照起家东南西北家排列，即：
```
<东家>, <南家>, <西家>, <北家>
```

接下来对于每一局，如果有立直成功的玩家（有宣言但立直失败则忽略）则单独起一行使用 r 加上玩家名字。一般而言为了阅读方便会使用大写的 R 并添加空格。即：    
```
R <立直玩家>
```

最后和 tex 牌谱一样标注该局的结果，也就是流局情况下
```
<听牌者 1>,<听牌者 2>, ... <
```
和牌情况下
```
<放铳者> > <和牌者>
<役 1>; <役 2>; ... # <符数>
```

按照如上格式完成所有的局即可。

#### 编写并保存 .short 文件
按照上述格式完成编写后，请将文件保存在`Short/S{sid}_G{gid}.short`文件中（当然要把`{sid}`和`{gid}`替换为正确的局）

#### 使用 convert_short.py 解析并转换
在根目录下执行
```bash
python convert_short.py
```

会弹出提示输入 SID 和 GID，并且询问是否转换为 scop 文件、是否生成 tex 模板以及是否详细输出。完成对应输入后便可以得到最终的结果。（可以更改 python 文件中函数的缺省值来改变初始分数，目前是 25000）

